import{_ as e,r as t}from"./vendor.07dd2803.js";import{_ as l,d as n,a as r,b as a,L as o,u as s,f as m}from"./index.8dac9e05.js";function c(t){const{scrollElement:n,threshold:r=20}=t,a=e.useRef(null),[o,s]=e.useState(0);e.useEffect((()=>{n&&(a.current="string"==typeof n?document.querySelector(n):n),a.current=document.querySelector("#right")}),[]);const m=e.useCallback((e=>{var t;s((null==(t=null==a?void 0:a.current)?void 0:t.scrollTop)||0)}),[]);e.useEffect((()=>(a.current&&(console.log("attach"),a.current.addEventListener("scroll",m)),()=>{var e;console.log("remove"),null==(e=null==a?void 0:a.current)||e.removeEventListener("scroll",m)})),[a.current]);const c=e.useMemo((()=>o>r),[o]),u=l("fixed right-2 bottom-2 text-3xl cursor-pointer",{block:c,hidden:!c});return e.createElement("div",{className:u,onClick:()=>{a.current.scroll({top:0,left:0,behavior:"smooth"})}},"â‡§")}function u(e,t="YYYY-MM-DD HH:mm"){return e?n(e).format(t):null}function d(t){const{avatar:l,userName:n,content:r,date:a,userHtml:o}=t,s=e.useCallback((()=>{window.open(o,"__blank")}),[]);return e.createElement("div",{className:"py-4 flex"},e.createElement("img",{src:l,className:"w-10 h-10 flex-initial mr-4 mt-1 rounded-full border border-gray-200",alt:"avatar"}),e.createElement("div",{className:"flex-1 border rounded-lg mt-1 bg-gray-100 common-arrow-left border-gray-200"},e.createElement("div",{className:"border-b border-gray-300 py-2 px-4"},e.createElement("span",{className:"common-action font-normal",onClick:s},n),e.createElement("span",null," commented at "),e.createElement("span",null,u(a,"MMMM D, YYYY h:mm A"))),e.createElement("div",{className:"markdown py-2 px-4 bg-white rounded-b-lg",dangerouslySetInnerHTML:{__html:window.marked(r)}})))}function i(t){const{issueNumber:l,issueUrl:n}=t,s=r((({comments:e})=>e.commentList)),m=a((({comments:e})=>e.getComments)),c=a((({comments:e})=>e.setCommentList));return e.useEffect((()=>(l&&m(l),()=>{c([])})),[l]),0===s.length?null:e.createElement("div",{className:"mt-24"},e.createElement(o,{left:"Comments",right:"Leave a comment >",onRightClick:()=>{window.open(n,"__blank")}}),e.createElement("div",null,s.map((t=>{const{id:l,body:n,user:r,updated_at:a}=t;return e.createElement(d,{key:l,content:n,avatar:r.avatar_url,userName:r.login,date:a,userHtml:r.html_url})}))))}function f(){var l;const{params:n,history:a}=s(),d=r((({issues:e})=>e.issueList)),[f,v]=e.useState(null);e.useEffect((()=>{const e=d.find((e=>t(e.number)===t(n.number)));e?v(e):m(n.number).then((e=>{v(e.data||null)}))}),[]);const b=e.useCallback((()=>{a.goBack()}),[]),E=e.useMemo((()=>(null==f?void 0:f.body)?window.marked(f.body):null),[f]),g=null==(l=null==f?void 0:f.user)?void 0:l.login;return e.createElement("div",null,e.createElement(o,{left:"< Go Back",onLeftClick:b}),e.createElement("div",{className:"mb-16"},e.createElement("div",{className:"text-2xl mb-2 font-semibold"},null==f?void 0:f.title),g&&e.createElement("div",{className:"text-base font-extralight"},u(null==f?void 0:f.updated_at,"MMMM D, YYYY h:mm A")," by ",g)),e.createElement("div",{className:"markdown",dangerouslySetInnerHTML:{__html:E}}),e.createElement(i,{issueNumber:null==f?void 0:f.number,issueUrl:null==f?void 0:f.html_url}),e.createElement(c,null),e.createElement(o,{classNames:"mt-6 mb-2",left:"< Go Back",onLeftClick:b}))}export default f;
